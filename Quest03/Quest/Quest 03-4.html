<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">

    <title>숫자야구 게임</title>

    <style>
        body {
            width: 50%;
            max-width: 800px;
            min-width: 480px;
            margin: 0 auto;
        }
    </style>
</head>

<body>
    <h1>숫자야구 게임</h1>

    <li style="margin-bottom:5px;">게임시작을 누르면 랜덤값으로 세자리의 숫자가 지정됩니다.</li>
    <li style="margin-bottom:5px;">랜덤값 세자리에 표시되는 각각의 숫자는 0이 나올 수 없으며 서로 중복값이 있어서는 안됩니다.</li>
    <li style="margin-bottom:5px;">유저는 임의 세자리를 기록해서 맞는지 결과를 확인합니다.</li>
    <li style="margin-bottom:5px;">회별로 기록한 숫자와 설정된숫자를 비교해서 상황을 표현해 줍니다.</li>
    <li style="margin-bottom:5px;">야구게임이니 9회안에 맞추고 실패시 패배입니다.</li>
    <div class="setDigitForm">
        <input type="submit" value="게임시작" class="setDigitSubmit">
    </div>

    <div class="form" style="margin-top:40px;">
        <input type="text" id="guessField" class="guessField">
        <input type="submit" value="정답확인" class="guessSubmit">
    </div>

    <div class="resultArea" style="margin-top:40px;">
        <span>정답여부는 여기에!!</span>
    </div>

    <script>
        /** TODO: 여기에 게임이 작동될 수 있도록 스크립트를 짜보세요  */
        var set = document.querySelector('.setDigitSubmit');
        var check = document.querySelector('.guessSubmit');
        var result = document.querySelector('.resultArea > span');

        var list = [1, 2, 3, 4, 5, 6, 7, 8, 9];
        var choose = [];
        var count = 0;
        var strike = 0;
        var ball = 0;
        /* 게임시작 버튼 클릭 */
        check.disabled = true;
        set.addEventListener('click', function () {
            /* 랜덤 숫자 뽑기 */
            count = 0;
            for (var i = 0; i < 3; i++) {
                var rd = Math.floor(Math.random() * list.length);
                choose[i] = list.splice(rd, 1)[0];
            }
            console.log('choose >> ', choose);
            check.disabled = false;
            result.innerHTML = "";
            check.addEventListener('click', function () {
                var input = document.querySelector('.guessField').value;
                var input_arr = input.split('');
                console.log(input_arr)
                strike = 0;
                ball = 0;
                count++;
                for (var r = 0; r < 3; r++) {
                    for (var a = 0; a < 3; a++) {
                        if (choose[r] == input_arr[a]) {
                            if (r === a) {
                                strike++;
                            } else {
                                ball++;
                            }
                        }
                    }
                }
                console.log("strike >> ", strike)
                console.log("ball >> ", ball)
                if(count<10){
                    if (strike == 3) {
                        result.innerHTML += ("<h3>⭕ " + count + "번 만에 맞추셨습니다 ⭕</h3>");
                    } else {
                        result.innerHTML += ("<h3>" + count + "회 : " + strike + "S " + ball + "B ➡ "+input_arr +"</h3>");
                    }
                } else{
                    result.innerHTML += ("<h2>❌ 실패 ❌</h2>");
                    check.disabled = true;
                }
            })
        })
    </script>
</body>

</html>