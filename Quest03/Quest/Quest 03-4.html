<!DOCTYPE html>
<html>
<head>
	<meta charset='utf-8'>
	<title>âš¾ ìˆ«ìì•¼êµ¬ ê²Œì„ âš¾</title>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
	<!--sweetalert2-->
	<style>
		body {
			width: 50%;
			max-width: 800px;
			min-width: 480px;
			margin: 0 auto;
		}
		.swal2-popup,
		.swal2-modal,
		.swal2-show {
			display: flex;
			position: absolute;
			top: 100px;
		}
	</style>
</head>

<body>
	<h1>ìˆ«ìì•¼êµ¬ ê²Œì„</h1>
	<li style='margin-bottom:5px;'>ê²Œì„ì‹œì‘ì„ ëˆ„ë¥´ë©´ ëœë¤ê°’ìœ¼ë¡œ ì„¸ìë¦¬ì˜ ìˆ«ìê°€ ì§€ì •ë©ë‹ˆë‹¤.</li>
	<li style='margin-bottom:5px;'>ëœë¤ê°’ ì„¸ìë¦¬ì— í‘œì‹œë˜ëŠ” ê°ê°ì˜ ìˆ«ìëŠ” 0ì´ ë‚˜ì˜¬ ìˆ˜ ì—†ìœ¼ë©° ì„œë¡œ ì¤‘ë³µê°’ì´ ìˆì–´ì„œëŠ” ì•ˆë©ë‹ˆë‹¤.</li>
	<li style='margin-bottom:5px;'>ìœ ì €ëŠ” ì„ì˜ ì„¸ìë¦¬ë¥¼ ê¸°ë¡í•´ì„œ ë§ëŠ”ì§€ ê²°ê³¼ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.</li>
	<li style='margin-bottom:5px;'>íšŒë³„ë¡œ ê¸°ë¡í•œ ìˆ«ìì™€ ì„¤ì •ëœìˆ«ìë¥¼ ë¹„êµí•´ì„œ ìƒí™©ì„ í‘œí˜„í•´ ì¤ë‹ˆë‹¤.</li>
	<li style='margin-bottom:5px;'>ì•¼êµ¬ê²Œì„ì´ë‹ˆ 9íšŒì•ˆì— ë§ì¶”ê³  ì‹¤íŒ¨ì‹œ íŒ¨ë°°ì…ë‹ˆë‹¤.</li>
	<div class='setDigitForm'>
		<input type='submit' value='ê²Œì„ì‹œì‘' class='setDigitSubmit'><!-- ê²Œì„ì‹œì‘ ë²„íŠ¼ -->
	</div>
	<div class='form' style='margin-top:40px;'>
		<input type='text' id='guessField' class='guessField'><!-- ì •ë‹µ ì…ë ¥ -->
		<input type='submit' value='ì •ë‹µí™•ì¸' class='guessSubmit'><!-- ì •ë‹µí™•ì¸ ë²„íŠ¼ -->
	</div>
	<div class='resultArea' style='margin-top:40px;'>
		<!-- ì •ë‹µ ê²°ê³¼ í™•ì¸ -->
		<span>ì •ë‹µì—¬ë¶€ëŠ” ì—¬ê¸°ì—!!</span>
	</div>
	<script>
		/** ë³€ìˆ˜ **/
		var numList = []; // ì „ì²´ ìˆ«ì ë²”ìœ„ (1~9)
		var rdNum = []; // ëœë¤ ìˆ«ì 3ê°œ
		var count = 0; // íšŸìˆ˜
		var strike = 0;
		var ball = 0;
		/** ë²„íŠ¼ **/
		var startBtn = document.getElementsByClassName('setDigitSubmit')[0]; // ê²Œì„ì‹œì‘
		var checkBtn = document.getElementsByClassName('guessSubmit')[0]; // ì •ë‹µí™•ì¸
		/** ì…ë ¥ **/
		var inputNum = document.getElementsByClassName('guessField')[0]; // ì •ë‹µì…ë ¥
		/** ì¶œë ¥**/
		var show = document.getElementsByClassName('resultArea')[0]; // ì •ë‹µì—¬ë¶€
		/** í•¨ìˆ˜ **/
		// ë²„íŠ¼ í™œì„±í™” or ë¹„í™œì„±í™”
		function btnOnOff(btnName, state) {
			btnName.disabled = (state === 'on') ? false : true;
		}
		function random(array, newArr) { // ëœë¤ ì¶”ì¶œ
			for (var i = 0; i < 3; i++) {
				console.log("array >> " + array);
				var rd = Math.floor(Math.random() * array.length); // 0 ~ 8ê¹Œì§€ ì¤‘ í•˜ë‚˜ ë½‘ê¸°
				console.log((i + 1) + 'ë²ˆì§¸ ìˆ«ì index >> ' + rd);
				newArr[i] = array.splice(rd, 1); // ê¸°ì¡´ ìš”ì†Œë¥¼ ì‚­ì œ
				console.log('newArr >> ' + newArr[i]);
			}
		}
		// ì¤‘ë³µí™•ì¸
		function copy(arr) {
			var check = [];
			for (var i = 0; i < arr.length; i++) {
				if (check.indexOf(arr[i]) != -1) { // í¬í•¨ ë  ë•Œ
					return true;
				}
				check.push(arr[i]);
			}
		}
		// ì´ˆê¸°í™”
		function clear(){
			inputNum.value = '';
		}

		btnOnOff(checkBtn, 'off'); // ì •ë‹µí™•ì¸ ë²„íŠ¼ ë¹„í™œì„±í™”
		// ê²Œì„ì‹œì‘ ë²„íŠ¼ í´ë¦­
		startBtn.addEventListener('click', function () {
			btnOnOff(checkBtn, 'on'); // ì •ë‹µí™•ì¸ ë²„íŠ¼ í™œì„±í™”
			this.value = 'ìƒˆê²Œì„';
			/** ì´ˆê¸°í™” **/
			show.innerHTML = ('<span>ì •ë‹µì—¬ë¶€ëŠ” ì—¬ê¸°ì—!!</span>');
			clear();
			count = 0; // íšŸìˆ˜ ì´ˆê¸°í™”
			numList = [1, 2, 3, 4, 5, 6, 7, 8, 9];
			random(numList, rdNum);
			console.log('ì¶”ì¶œëœ ëœë¤ ìˆ«ì : ' + rdNum);
		})

		// ì •ë‹µí™•ì¸ ë²„íŠ¼ í´ë¦­
		checkBtn.addEventListener('click', function () {
			/** ì´ˆê¸°í™” **/
			ball = 0;
			strike = 0;
			if (count == 0) show.innerHTML = '';
			var result = []; // ì…ë ¥í•œ ê°’ì„ ë°°ì—´ë¡œ
			console.log('ì…ë ¥í•œ ê°’ >> ', inputNum.value); // ì…ë ¥í•œ ê°’ í™•ì¸
			result = inputNum.value.split(''); // ë¬¸ìì—´ ë°°ì—´ë¡œ ë°”ê¾¸ê¸°
			console.log('ë°°ì—´ë¡œ ë°”ê¾¼ê±° í™•ì¸ >> ' + result);
			if (result.includes('0') || result.includes(' ') || result.length !== 3 || copy(result) || result.map(Number).includes(NaN)) { // 0ì´ ìˆì„ ë•Œ, ê³µë°±ì´ ìˆì„ ë•Œ, 3ìë¦¬ ìˆ«ìê°€ ì•„ë‹ ë•Œ, ì¤‘ë³µìœ¼ë¡œ ì…ë ¥í•  ë•Œ, ë¬¸ìì—´ í¬í•¨í•  ë•Œ
				Swal.fire({
					title: '== ë‹¤ì‹œì…ë ¥í•´ì£¼ì„¸ìš” ==',
					text: 'ìˆ«ì 3ê°œ ì…ë ¥ / ì¤‘ë³µ âŒ / ê³µë°± âŒ / 0 âŒ'
				})
				// alert('ë‹¤ì‹œì…ë ¥í•´ì£¼ì„¸ìš”\n[ ìˆ«ì 3ê°œ ì…ë ¥, ì¤‘ë³µ X , ê³µë°± X, ìˆ«ì0 X ]')
				clear();
				return;
			}
			/** ì¡°ê±´ë¬¸ **/
			for (var r = 0; r < 3; r++) { // ëœë¤ ìˆ«ì 3ê°œì˜ ì¸ë±ìŠ¤ê°’
				for (var a = 0; a < 3; a++) { // ì…ë ¥í•œ ìˆ«ì 3ê°œì˜ ì¸ë±ìŠ¤ê°’
					if (rdNum[r] == result[a]) { // ìˆ«ì ì¼ì¹˜
						(r === a) ? strike++ : ball++; // ì°¸ : ìœ„ì¹˜ ì¼ì¹˜ O , ê±°ì§“ : ìœ„ì¹˜ ì¼ì¹˜ X
					}
				}
			}
			count++;
			/** ì¶œë ¥ë¬¸ **/
			console.log('íšŸìˆ˜ >>', count);

			// ì •ë‹µì¼ë•Œ or ì•„ë‹ë•Œ
			// íšŸìˆ˜
			//
			clear();
			if (strike === 0 && ball === 0) {
				show.innerHTML += '<h3>' + count + 'íšŒ : ğŸ‘ŠğŸ» OUT ğŸ‘ŠğŸ» â¡ ' + result + '</h3>';
				return;
			}
			if(strike == 3){
				show.innerHTML += '<h3>' + count + 'íšŒ : â­ í™ˆëŸ° â­ â¡ ' + result + '</h3>';
				btnOnOff(checkBtn, 'off');
				return;
			}
			if(count == 9){
				show.innerHTML += '<h3>' + count + 'íšŒ : ' + strike + 'S ' + ball + 'B â¡ ' + result + '</h3><h3> ğŸ˜¥ ì •ë‹µì€ ğŸ‘‰ğŸ» ' + rdNum + 'ğŸ˜¥</h3>';
				btnOnOff(checkBtn, 'off');
				return;
			}
			if (strike > 0 || ball > 0) {
				show.innerHTML += '<h3>' + count + 'íšŒ : ' + strike + 'S ' + ball + 'B â¡ ' + result + '</h3>';
				return;
			}
		})
	</script>
</body>
</html>