<!DOCTYPE html>
<html>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="./test2.css">
    <script src="./desktop.js"></script>
    <title>ğŸ’»</title>
</head>

<body>
    <section class="desktop"></section>
    <script>
        // ë ˆì´ì•„ì›ƒ
        let body = document.getElementsByTagName('body')[0]; // body ì˜ì—­
        body.innerHTML += '<header class = "tab"></header>';
        
        let tab = document.querySelector('.tab');
        let tabNum = 1;
        
       

        /** ì´ˆê¸°í™”ë©´ */
        let desktop = document.querySelector('.desktop'); // desktop ì˜ì—­

        let iconNum = 0; // ì…ë ¥ë°›ì€ ì•„ì´ì½˜ ê°œìˆ˜
        let folderNum = 0; // ì…ë ¥ë°›ì€ í´ë” ê°œìˆ˜
        
        let icons = []
        let folders = [];
        
        let desktop1 = new Desktop();
        
        var cName;
        let footer = desktop1.footer(cName, desktop); // footer
        let nav = desktop1.div(cName, 'nav', footer); // nav
        let plus = desktop1.img(cName, 'plus', nav);
        
        let bubble = desktop1.div(cName, 'bubble', footer);
        bubble.style.display = 'none';
        let iconDiv = desktop1.div(cName, 'inputArea', bubble); // 1ë²ˆì§¸ input icon div ì˜ì—­
        let folderDiv = desktop1.div(cName, 'inputArea', bubble); // 2ë²ˆì§¸ input , folder div ì˜ì—­
        
        let iconInput = desktop1.inputText(iconDiv, cName, 'ì•„ì´ì½˜');
        let folderInput = desktop1.inputText(folderDiv, cName, 'í´ë”');
        
        let box = desktop1.box(cName, `box${tabNum}`, desktop);
        
        let iconSubmit = desktop1.inputSubmit(iconDiv, cName, 'icon', 'ì•„ì´ì½˜');
        let folderSubmit = desktop1.inputSubmit(folderDiv, cName, 'folder', 'í´ë”');

        let submitBtn = [iconSubmit, folderSubmit];


        let icon1 = new Icon();
        let folder1 = new Folder();

        plus.addEventListener('click', function () { // í”ŒëŸ¬ìŠ¤ ì•„ì´ì½˜ í´ë¦­
            if (bubble.style.display == 'none') {
                bubble.style.display = 'block';
            } else {
                bubble.style.display = 'none';
            }
        })

        let modal = document.createElement('div')
        let modalBody = document.createElement('div');
        let closeBtn = document.createElement('button');

        let pick = null;
        let pickIndex = null;

        function right(arr) {
            arr.addEventListener('auxclick', function () {
                console.log('ìš°í´ë¦­ í…ŒìŠ¤íŠ¸')
                confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')
            })
        }
        submitBtn.forEach(function (e) { // ìƒì„± ë²„íŠ¼ í´ë¦­
            e.addEventListener('click', function () {
                this.value == 'ì•„ì´ì½˜ìƒì„±' ? iconNum += Number(iconInput.value) : folderNum += Number(folderInput.value);
                this.value == 'ì•„ì´ì½˜ìƒì„±' ? icon1.create(icons, iconNum, 'icon') : folder1.create(folders, folderNum, 'folder');
                this.parentElement.children[0].value = ''; // input ì´ˆê¸°í™”  
                console.log(icons)
                console.log(folders)

                let folderDbclick = new Window();
                let folderName = folderDbclick.dblclick(folders);
                let dragIcon = desktop1.drag(box);


                modal.className = 'modal';
                modalBody.className = 'modal_body';
                modalBody.textContent = `${folderName}`
                closeBtn.className = 'close_btn';
                closeBtn.textContent = "X";

                desktop.appendChild(modal);
                modal.appendChild(modalBody);
                modalBody.appendChild(closeBtn);
                // ë”ë¸”í´ë¦­
                folderDbclick.close();

            })
        })

        right(box)
        // // ëª¨ë‹¬
        document.addEventListener('contextmenu', function (e) {
            e.preventDefault()
        })

        tab.innerHTML += `<div><button class ="tabBtn" data-box='box${tabNum}'>${tabNum}. ì˜ ğŸ’»</button><button class = "closeBtn">X</button></div>`;
        tab.innerHTML += `<div><button class="plusBtn">+</button></div>`;
        let tabPlusBtn = document.querySelector('.plusBtn');
        tabPlusBtn.addEventListener('click',function(){
            tabNum++;
            $('.tab').append(`<div><buu>${tabNum}. ì˜ ğŸ’»</buu><button class = "closeBtn">X</button></div>`);
            let box = desktop1.box(cName, `box${tabNum}`, desktop);
        })
        console.log(tab)
        box.style.display = 'none';
        tab.addEventListener('click',function(e){
            console.log(e.path[0].innerHTML,'í´ë¦­')
        })
    </script>
</body>

</html>